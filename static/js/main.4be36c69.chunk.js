(this.webpackJsonptrybewallet=this.webpackJsonptrybewallet||[]).push([[0],{40:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(20),i=n.n(c),s=n(16),o=n(13),l=(n(40),n(5)),d=n(11),u=n(12),b=n(6),j=n(15),h=n(14),p=n(3),O=n.n(p),x=n(1);O.a.string,O.a.func,O.a.bool;var m=function(e){var t=e.type,n=e.name,a=e.text,r=e.id,c=e.className,i=e.testID,s=e.onClick,o=e.disabled;return Object(x.jsx)("div",{children:Object(x.jsx)("button",{type:t?"button":"submit",name:n,id:r,className:c,"data-testid":i,onClick:s,disabled:o,children:a})})},v=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(d.a)(this,n),(e=t.call(this)).totalAmount=e.totalAmount.bind(Object(b.a)(e)),e}return Object(u.a)(n,[{key:"totalAmount",value:function(){var e=this.props.getWalletExpenses.reduce((function(e,t){var n=t.value,a=t.currency,r=t.exchangeRates[a].ask;return e+=parseFloat(n)*parseFloat(r)}),0);return Math.round(100*e)/100}},{key:"render",value:function(){var e=this.props.user;return Object(x.jsxs)("header",{"data-testid":"email-field",children:[Object(x.jsxs)("h3",{children:["Email:",Object(x.jsx)("span",{children:" ".concat(e)})]}),Object(x.jsx)("div",{"data-testid":"total-field",children:Object(x.jsxs)("p",{children:["Despesa total: R$",this.totalAmount()]})}),Object(x.jsx)("div",{"data-testid":"header-currency-field",children:Object(x.jsx)("p",{children:"C\xe2mbio: BRL"})})]})}}]),n}(r.a.Component),f=(O.a.string,Object(o.b)((function(e){return{user:e.user.email,getWalletExpenses:e.wallet.expenses}}))(v));O.a.string,O.a.func;var g=function(e){var t=e.type,n=e.name,a=e.labelText,r=e.placeholder,c=e.className,i=e.id,s=e.testID,o=e.onChange;return Object(x.jsx)("div",{children:Object(x.jsxs)("label",{htmlFor:i,children:[a,Object(x.jsx)("input",{type:t,name:n,placeholder:r,className:c,id:i,"data-testid":s,onChange:o})]})})};O.a.string,O.a.func;var y=function(e){var t=e.name,n=e.labelText,a=e.id,r=e.options,c=e.onChange;return Object(x.jsxs)("label",{htmlFor:a,children:[n,Object(x.jsx)("select",{name:t,id:a,onChange:c,children:r?r.map((function(e,t){return Object(x.jsx)("option",{value:e,children:e},t)})):null})]})};var w="USER_INFO",C="LOADING_TYPE",S="SUCCESS_TYPE",k="ERROR_TYPE",E="ADD_EXPENSES",T="DELETE_EXPENSE",D=function(){return{type:k}},N=function(e){return{type:E,payload:e}},P=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={email:"",password:"",invalidEmail:!0,invalidPassword:!0,redirect:!1},a.validatePassword=a.validatePassword.bind(Object(b.a)(a)),a.validateEmail=a.validateEmail.bind(Object(b.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(b.a)(a)),a}return Object(u.a)(n,[{key:"validatePassword",value:function(e){var t=e.target.value;return function(e){return e.length>=6}(t)?this.setState({password:t,invalidPassword:!1}):this.setState({password:t,invalidPassword:!0})}},{key:"validateEmail",value:function(e){var t=e.target.value;return function(e){return/\S+@\S+\.\S+/.test(e)}(t)?this.setState({email:t,invalidEmail:!1}):this.setState({email:t,invalidEmail:!0})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.props.setEmailToStore,n=this.state;t({email:n.email,password:n.password}),this.setState({redirect:!0})}},{key:"render",value:function(){var e=this.state,t=e.redirect,n=e.invalidEmail,a=e.invalidPassword;return t?Object(x.jsx)(l.a,{to:"/trybewallet/wallet"}):Object(x.jsxs)("div",{className:"login-container",children:[Object(x.jsxs)("div",{className:"logo-container",children:[Object(x.jsx)("p",{children:"logo 1"}),Object(x.jsx)("p",{children:"logo 2"})]}),Object(x.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(x.jsx)(g,{type:"text",placeholder:"E-mail",className:"input",id:"email",testID:"email-input",onChange:this.validateEmail}),Object(x.jsx)(g,{type:"password",placeholder:"Senha",className:"input",id:"password",testID:"password-input",onChange:this.validatePassword}),Object(x.jsx)(m,{id:"submit-button",text:"Entrar",disabled:n||a})]})]})}}]),n}(r.a.Component),I=Object(o.b)(null,(function(e){return{setEmailToStore:function(t){return e({type:w,payload:t})}}}))(P);var F=function(){return Object(x.jsxs)("div",{children:[Object(x.jsx)("h1",{children:"P\xe1gina n\xe3o encontrada"}),Object(x.jsx)(s.b,{to:"/trybewallet",children:"P\xe1gina Inicial"})]})},R=n(21),A=n(4),M=n(18),L=n.n(M),U=n(22),_=function(){var e=Object(U.a)(L.a.mark((function e(){var t,n;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://economia.awesomeapi.com.br/json/all");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){return function(e){return e({type:C}),_().then((function(t){return e({type:S,payload:t})}),(function(){return e(D())}))}},B=["Alimenta\xe7\xe3o","Lazer","Trabalho","Transporte","Sa\xfade"],V=["Dinheiro","Cart\xe3o de cr\xe9dito","Cart\xe3o de d\xe9bito"],Y=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(d.a)(this,n),(e=t.call(this)).handleClick=e.handleClick.bind(Object(b.a)(e)),e}return Object(u.a)(n,[{key:"handleClick",value:function(e){var t=e.target;(0,this.props.remove)(parseInt(t.name,10))}},{key:"render",value:function(){var e=this,t=this.props.getExpenses;return Object(x.jsx)(x.Fragment,{children:t.map((function(t){var n=t.id,a=t.currency,r=t.description,c=t.tag,i=t.method,s=t.value,o=t.exchangeRates;return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:r}),Object(x.jsx)("td",{children:c}),Object(x.jsx)("td",{children:i}),Object(x.jsx)("td",{children:s}),Object(x.jsx)("td",{children:o[a].name.split("/")[0]}),Object(x.jsx)("td",{children:Number(o[a].ask).toFixed(2)}),Object(x.jsx)("td",{children:Number(o[a].ask*s).toFixed(2)}),Object(x.jsx)("td",{children:"Real"}),Object(x.jsx)("td",{children:Object(x.jsx)(m,{type:"button",name:n,testID:"delete-btn",onClick:e.handleClick,text:"Excluir"})})]},n)}))})}}]),n}(r.a.Component),z=(O.a.arrayOf,O.a.object,Object(o.b)((function(e){return{getExpenses:e.wallet.expenses}}),(function(e){return{remove:function(t){return e({type:T,id:t})}}}))(Y)),J=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(d.a)(this,n),(e=t.call(this)).state={},e.renderTable=e.renderTable.bind(Object(b.a)(e)),e}return Object(u.a)(n,[{key:"renderTable",value:function(){return Object(x.jsxs)("table",{children:[Object(x.jsx)("thead",{children:Object(x.jsx)("tr",{children:["Descri\xe7\xe3o","Tag","M\xe9todo de pagamento","Valor","Moeda","C\xe2mbio utilizado","Valor convertido","Moeda de convers\xe3o","Editar/Excluir"].map((function(e){return Object(x.jsx)("th",{children:e},e)}))})}),Object(x.jsx)("tbody",{children:Object(x.jsx)(z,{})})]})}},{key:"render",value:function(){return Object(x.jsx)("section",{children:this.renderTable()})}}]),n}(r.a.Component),X=(O.a.arrayOf,O.a.object,Object(o.b)((function(e){return{getExpenses:e.wallet.expenses}}))(J)),$=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(d.a)(this,n),(e=t.call(this)).state={expense:{id:0,value:0,description:"",currency:"USD",method:"Dinheiro",tag:"Alimenta\xe7\xe3o"}},e.renderInputs=e.renderInputs.bind(Object(b.a)(e)),e.renderSelects=e.renderSelects.bind(Object(b.a)(e)),e.renderForm=e.renderForm.bind(Object(b.a)(e)),e.handleChange=e.handleChange.bind(Object(b.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(b.a)(e)),e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){(0,this.props.getCoinsThunk)()}},{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value,r=this.state.expense;this.setState({expense:Object(A.a)(Object(A.a)({},r),{},Object(R.a)({},n,a))})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.state.expense,n=this.props.expenses;this.setState({expense:{id:t.id+1,value:0,description:"",currency:"USD",method:"Dinheiro",tag:"Alimenta\xe7\xe3o"}},(function(){n(t)}))}},{key:"renderSelects",value:function(){var e=this.props.currencies,t=Object.keys(e).filter((function(e){return"USDT"!==e}));return Object(x.jsxs)("div",{children:[Object(x.jsx)(y,{name:"currency",labelText:"Moeda",id:"expense-currency",options:t,onChange:this.handleChange}),Object(x.jsx)(y,{name:"method",labelText:"M\xe9todo de pagamento",id:"expense-payment",options:V,onChange:this.handleChange}),Object(x.jsx)(y,{name:"tag",labelText:"Tag",id:"expense-category",options:B,onChange:this.handleChange})]})}},{key:"renderInputs",value:function(){return Object(x.jsxs)("div",{children:[Object(x.jsx)(g,{type:"number",name:"value",placeholder:"0",className:"expense-input",id:"expense-value",labelText:"Valor",onChange:this.handleChange}),Object(x.jsx)(g,{type:"text",name:"description",className:"expense-input",id:"expense-description",labelText:"Descri\xe7\xe3o",onChange:this.handleChange})]})}},{key:"renderForm",value:function(){return Object(x.jsx)("section",{children:Object(x.jsxs)("form",{onSubmit:this.handleSubmit,children:[this.renderInputs(),this.renderSelects(),Object(x.jsx)(m,{name:"expense-submit",id:"expense-submit",text:"Adicionar despesa"})]})})}},{key:"render",value:function(){return Object(x.jsxs)("main",{children:[this.renderForm(),Object(x.jsx)(X,{})]})}}]),n}(r.a.Component),G=Object(o.b)((function(e){return{currencies:e.wallet.currencies,getExpenses:e.wallet.expenses}}),(function(e){return{getCoinsThunk:function(){return e(W())},expenses:function(t){return e(function(e){return function(){var t=Object(U.a)(L.a.mark((function t(n){var a,r,c;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://economia.awesomeapi.com.br/json/all");case 3:if((a=t.sent).ok){t.next=6;break}throw new Error("Fetch failed");case 6:return t.next=8,a.json();case 8:return delete(r=t.sent).USDT,c=Object(A.a)(Object(A.a)({},e),{},{exchangeRates:r}),t.abrupt("return",n(N(c)));case 14:return t.prev=14,t.t0=t.catch(0),t.abrupt("return",n(D(t.t0.message)));case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}}()}(t))}}}))($),H=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(x.jsxs)("div",{children:[Object(x.jsx)(f,{}),Object(x.jsx)(G,{}),Object(x.jsx)(s.b,{to:"/trybewallet",children:"Home"})]})}}]),n}(r.a.Component);var q=function(){return Object(x.jsxs)(l.d,{children:[Object(x.jsx)(l.b,{exact:!0,path:"/trybewallet",component:I}),Object(x.jsx)(l.b,{exact:!0,path:"/trybewallet/wallet",component:H}),Object(x.jsx)(l.b,{path:"*",component:F})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var K=n(17),Q=n(28),Z=n(29),ee={email:"",password:""},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object(A.a)(Object(A.a)({},e),{},{email:t.payload.email,password:t.payload.password});default:return e}},ne=n(30),ae={currencies:[],isLoading:!1,expenses:[]},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return Object(A.a)(Object(A.a)({},e),{},{isLoading:!0});case S:return Object(A.a)(Object(A.a)({},e),{},{currencies:t.payload});case k:return Object(A.a)(Object(A.a)({},e),{},{error:"error 404"});case E:return Object(A.a)(Object(A.a)({},e),{},{expenses:[].concat(Object(ne.a)(e.expenses),[Object(A.a)(Object(A.a)({},t.payload),{},{id:e.expenses.length})]),error:""});case T:return Object(A.a)(Object(A.a)({},e),{},{expenses:e.expenses.filter((function(e){return e.id!==t.id}))});default:return e}},ce=Object(K.combineReducers)({user:te,wallet:re}),ie=Object(K.createStore)(ce,Object(Q.composeWithDevTools)(Object(K.applyMiddleware)(Z.a)));i.a.render(Object(x.jsx)(o.a,{store:ie,children:Object(x.jsx)(s.a,{children:Object(x.jsx)(q,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[47,1,2]]]);
//# sourceMappingURL=main.4be36c69.chunk.js.map